{"version":3,"sources":["../src/index.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2025 LiveKit, Inc.\n//\n// SPDX-License-Identifier: Apache-2.0\nimport { Plugin } from '@livekit/agents';\nimport { downloadFileToCacheDir as hfDownload } from './hf_utils.js';\nimport { HG_MODEL_REPO, MODEL_REVISIONS, ONNX_FILEPATH } from './turn_detector/constants.js';\n\nexport { downloadFileToCacheDir } from './hf_utils.js';\nexport * as turnDetector from './turn_detector/index.js';\n\nclass EOUPlugin extends Plugin {\n  constructor() {\n    super({\n      title: 'turn-detector',\n      version: '0.1.1',\n      package: '@livekit/agents-plugin-livekit',\n    });\n  }\n\n  async downloadFiles(): Promise<void> {\n    const { AutoTokenizer } = await import('@huggingface/transformers');\n\n    for (const revision of Object.values(MODEL_REVISIONS)) {\n      // Ensure tokenizer is cached\n      await AutoTokenizer.from_pretrained(HG_MODEL_REPO, { revision });\n\n      // Ensure ONNX model and language data are cached\n      await hfDownload({ repo: HG_MODEL_REPO, path: ONNX_FILEPATH, revision });\n      await hfDownload({ repo: HG_MODEL_REPO, path: 'languages.json', revision });\n    }\n  }\n}\n\nPlugin.registerPlugin(new EOUPlugin());\n"],"mappings":"AAGA,SAAS,cAAc;AACvB,SAAS,0BAA0B,kBAAkB;AACrD,SAAS,eAAe,iBAAiB,qBAAqB;AAE9D,SAAS,8BAA8B;AACvC,YAAY,kBAAkB;AAE9B,MAAM,kBAAkB,OAAO;AAAA,EAC7B,cAAc;AACZ,UAAM;AAAA,MACJ,OAAO;AAAA,MACP,SAAS;AAAA,MACT,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,gBAA+B;AACnC,UAAM,EAAE,cAAc,IAAI,MAAM,OAAO,2BAA2B;AAElE,eAAW,YAAY,OAAO,OAAO,eAAe,GAAG;AAErD,YAAM,cAAc,gBAAgB,eAAe,EAAE,SAAS,CAAC;AAG/D,YAAM,WAAW,EAAE,MAAM,eAAe,MAAM,eAAe,SAAS,CAAC;AACvE,YAAM,WAAW,EAAE,MAAM,eAAe,MAAM,kBAAkB,SAAS,CAAC;AAAA,IAC5E;AAAA,EACF;AACF;AAEA,OAAO,eAAe,IAAI,UAAU,CAAC;","names":[]}