{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alan/hackathon/fin-assist/src/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function Home() {\r\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\r\n  const chunksRef = useRef<BlobPart[]>([]);\r\n  const [recording, setRecording] = useState(false);\r\n  const [status, setStatus] = useState<string>(\"\");\r\n  const [transcript, setTranscript] = useState<string>(\"\");\r\n  const [reply, setReply] = useState<string>(\"\");\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state !== \"inactive\") {\r\n        mediaRecorderRef.current.stop();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  async function startRecording() {\r\n    setTranscript(\"\");\r\n    setReply(\"\");\r\n    setStatus(\"Requesting mic...\");\r\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n    const recorder = new MediaRecorder(stream, { mimeType: \"audio/webm\" });\r\n    chunksRef.current = [];\r\n    recorder.ondataavailable = (e) => {\r\n      if (e.data.size > 0) chunksRef.current.push(e.data);\r\n    };\r\n    recorder.onstop = async () => {\r\n      const blob = new Blob(chunksRef.current, { type: \"audio/webm\" });\r\n      const form = new FormData();\r\n      form.append(\"audio\", blob, \"audio.webm\");\r\n      setStatus(\"Processing...\");\r\n      const res = await fetch(\"/api/voice/turn\", { method: \"POST\", body: form });\r\n      if (!res.ok) {\r\n        setStatus(\"Error\");\r\n        return;\r\n      }\r\n      const audioBuf = await res.arrayBuffer();\r\n      const transcriptHdr = res.headers.get(\"x-transcript\");\r\n      const replyHdr = res.headers.get(\"x-text\");\r\n      setTranscript(transcriptHdr ? decodeURIComponent(transcriptHdr) : \"\");\r\n      setReply(replyHdr ? decodeURIComponent(replyHdr) : \"\");\r\n      const url = URL.createObjectURL(new Blob([audioBuf], { type: res.headers.get(\"content-type\") || \"audio/mpeg\" }));\r\n      if (audioRef.current) {\r\n        audioRef.current.src = url;\r\n        await audioRef.current.play().catch(() => {});\r\n      }\r\n      setStatus(\"Done\");\r\n    };\r\n    recorder.start();\r\n    mediaRecorderRef.current = recorder;\r\n    setRecording(true);\r\n    setStatus(\"Recording...\");\r\n  }\r\n\r\n  function stopRecording() {\r\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== \"inactive\") {\r\n      mediaRecorderRef.current.stop();\r\n    }\r\n    setRecording(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-8 flex flex-col items-center gap-6\">\r\n      <h1 className=\"text-2xl font-semibold\">Voice Agent</h1>\r\n      <button\r\n        className=\"px-6 py-3 rounded-md bg-black text-white disabled:opacity-50\"\r\n        onMouseDown={startRecording}\r\n        onMouseUp={stopRecording}\r\n        onTouchStart={(e) => { e.preventDefault(); startRecording(); }}\r\n        onTouchEnd={(e) => { e.preventDefault(); stopRecording(); }}\r\n        disabled={recording}\r\n      >\r\n        {recording ? \"Recording...\" : \"Hold to Speak\"}\r\n      </button>\r\n      <div className=\"text-sm text-gray-500\">{status}</div>\r\n      <div className=\"w-full max-w-xl\">\r\n        <div className=\"font-medium\">You said</div>\r\n        <div className=\"p-3 border rounded-md min-h-[48px] whitespace-pre-wrap\">{transcript}</div>\r\n      </div>\r\n      <div className=\"w-full max-w-xl\">\r\n        <div className=\"font-medium\">Agent reply</div>\r\n        <div className=\"p-3 border rounded-md min-h-[48px] whitespace-pre-wrap\">{reply}</div>\r\n      </div>\r\n      <audio ref={audioRef} controls className=\"w-full max-w-xl\" />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alan/hackathon/fin-assist/node_modules/.pnpm/next%4015.5.6_%40opentelemetry%2B_0b3d4a82aa509ec47154efc05cf4914e/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alan/hackathon/fin-assist/node_modules/.pnpm/next%4015.5.6_%40opentelemetry%2B_0b3d4a82aa509ec47154efc05cf4914e/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4MACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Alan/hackathon/fin-assist/node_modules/.pnpm/next%4015.5.6_%40opentelemetry%2B_0b3d4a82aa509ec47154efc05cf4914e/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4MACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}